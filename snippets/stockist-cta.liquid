<div class="bg-lines p-4 lg:p-8 relative flex items-end justify-start aspect-portrait">
 {% if block.settings.image %}
    {% render 'responsive-image' with
    image: block.settings.image,
    wrapper_class: "absolute inset-0 h-full w-full",
    image_class: "object-cover h-full w-full",
    size: '1000x1000',
    width: 1000,
    height: 1000, %}
  {% endif %}
  <h3 class="h3 text-center absolute left-0 top-8 lg:top-16 w-full transition-opacity duration-2500 ease-in-out" x-data="{ shown: false }" x-intersect:enter="shown = true" x-intersect:leave="shown = false" :class="shown ? 'opacity-100' : 'opacity-0'">{{ block.settings.heading }}</h3>

  <div class="z-10 relative space-y-4">
    <div class="max-w-p">{{ block.settings.text }}</div>
    {% if block.settings.drawer_button_text %}
      <div x-data="{ open: false }">
        <button @click="open = !open" class="btn btn--outline-primary">{{ block.settings.drawer_button_text }}</button>
        <div>
          <div x-cloak x-show="open" class="drawer-backdrop" x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100" x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0" @click="open = false"></div>

          <div
            x-cloak
            x-show="open"
            x-transition:enter="transform transition ease-in-out duration-500"
            x-transition:enter-start="-translate-x-full"
            x-transition:enter-end="translate-x-0"
            x-transition:leave="transform transition ease-in-out duration-500"
            x-transition:leave-start="translate-x-0"
            x-transition:leave-end="-translate-x-full"
            class="fixed left-0 top-0 h-full w-full max-w-[446px] bg-primary text-contrast shadow-lg z-50"
            role="dialog"
            aria-modal="true"
          >
            <div class="p-4 h-full flex w-full flex-col">
              <div class="flex justify-between items-center">
                <h2 class="link">Retail Customers</h2>
                <button @click="open = false" class="">&times;</button>
              </div>
              <div class="mt-24 flex-1 flex flex-col justify-between w-full">
                {% render 'stockist-drawer' with heading: block.settings.drawer_heading %}
              </div>
            </div>
          </div>
        </div>
      </div>
    {% endif %}
  </div>
</div>
